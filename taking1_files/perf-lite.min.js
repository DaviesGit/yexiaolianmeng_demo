!function(o,a){"use strict";function e(o,a,i,s){var c,u=0;return"boolean"!=typeof a&&(s=i,i=a,a=void 0),function(){var e=this,t=Number(new Date)-u,r=arguments;function n(){u=Number(new Date),i.apply(e,r)}s&&!c&&n(),c&&clearTimeout(c),void 0===s&&o<t?n():!0!==a&&(c=setTimeout(s?function(){c=void 0}:n,void 0===s?o-t:o))}}o=o&&o.hasOwnProperty("default")?o.default:o,a=a&&a.hasOwnProperty("default")?a.default:a;var i={id:function(e){return'You need to set a "project/id", like perf-'+e+'="project/id"'},data:"`perf-data` should be a JSON string."};function n(e){return Object.prototype.toString.call(e).slice(8,-1)}function p(e){return Math.round(1e3*e)/1e3}function s(e,t){for(var r in t)e[r]=t[r];return e}function c(e){return e.replace(/^((https?:)?\/\/)?/,"//")}function u(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1).toUpperCase()}return e()+e()+e()+e()+e()+e()+e()+e()}function l(e){var t,r,n,o,a=e.replace(/^(https?:)?\/\//,""),i=a.indexOf("/"),s=a.slice(0,i).replace(/:\d+$/,""),c=a.slice(i);return n=0<=c.indexOf("?")?(r=(t=c.split("?"))[0],t[1]):(r=c,""),o=null!==s.match(/:\d+/)?s.match(/:(\d+)/)[1]:"80",{host:s,urlPath:r,port:o,search:n}}function m(e){return null!==e.match(/^https?:/)?e:""+location.protocol+e}function h(){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return e?e.type:"guessWifi"}var t={appName:"WEB://unknown-site",pageName:void 0,from:"prod",serviceWorker:!1,xhrSend:!1,dev:!1,etraceApiFilter:/(^\/[^/])|^(https?:)?\/\/([^/]+\.)?(ele(net)?\.me)/,apiImmediately:!1,bypassUrls:[],reportAssetsConstantly:!0,reportAssetsNetwork:!0},d={trackerDomain:"perf.ele.me",crayfishDomain:"crayfish.elemecdn.com",sendingTypes:{global:!0,device:!0,load:!0,event:!0,asset:!0,http:!0,api:!1}};function r(e,t){var r={sdkVer:"2.2.0",appName:"SDK://perf-js",type:"track-"+e,"data[id]":t.id,"data[value]":t.value},n=Object.keys(r).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(r[e])});(new Image).src="https://"+d.trackerDomain+"/_.gif?"+n.join("&")}function f(e,t){console[e](t),r("count",{id:"perf"+e[0].toUpperCase()+e.slice(1),value:t})}var v,g,w,y=window,E=!1,k=[],b=[],C=(v=2e3,g=function(){var e="https://"+d.trackerDomain+"/log?time="+Date.now(),t=new XMLHttpRequest;t.open("POST",e),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.send(JSON.stringify(b)),b=[]},void 0===w?e(v,g,!1):e(v,w,!1!==g));function T(e){(new Image).src="https://"+d.trackerDomain+"/_.gif?"+function n(o,a){var i=[];return Object.keys(o).forEach(function(e){var t=o[e];if(null!=t){var r=a?a+"["+e+"]":e;i.push("object"==typeof t?n(t,r):encodeURIComponent(r)+"="+encodeURIComponent(t))}}),i.join("&")}(e)+"&time="+Date.now()}function P(e){if("unload"===e.type)return t=e,void(navigator.sendBeacon&&navigator.sendBeacon("https://"+d.trackerDomain+"/log?time="+Date.now(),JSON.stringify([t]))||T(t));var t,r;y.ElemePerfConfigs.xhrSend?(r=e,b.push(r),C()):T(e)}function S(e,t){if(function(e,t){switch(e){case"load":return t.load;case"http-warning":return t.http;case"event":return t.event;case"network":return t.api;case"device":return t.device;case"network-batched":case"network-error":case"network-integrity":return t.asset;case"unload":return!0;default:return console.warn("[PERF] Unknown event:",e),!1}}(e,y.ElemePerfConfigs.sendingTypes)){var r=y.ElemePerfConfigs,n=r.appName,o=r.pageName,a=r.from,i=r.serviceWorker,s=r.ssid;return P({id:y.location.href,sdkVer:"2.2.0",appName:n,pageName:o,from:a,source:i?"web-sw":"web",ssid:s,network:h(),type:e,d:t}),this}}function D(e,t){E?S(e,t):k.push([e,t])}var q="track-count",I="track-timing";function L(e){var t=e.id,r=e.value,n=e.type;void 0===n&&(n=q);var o=e.env;void 0===o&&(o="prod");var a=e.extra;void 0===a&&(a={});var i=y.ElemePerfConfigs,s=i.appName,c=i.pageName,u=i.from,d=i.serviceWorker,f=i.ssid,p=s.match(/[A-Za-z0-9]/g).join("").toLowerCase();"count"===n&&(n=q),"timing"===n&&(n=I);var l={id:y.location.href,sdkVer:"2.2.0",appName:s,pageName:c,from:u,source:d?"web-sw":"web",ssid:f,network:h(),type:n,env:o,data:{id:t,value:r}};l[p]=a,P(l)}var N=window;function x(){D("device",function(){var e=N.screen||{},t=e.orientation&&e.orientation.type||"unknown",r=e.height;void 0===r&&(r=-1);var n=e.width;void 0===n&&(n=-1);var o=e.colorDepth;void 0===o&&(o=-1);var a=e.pixelDepth;return void 0===a&&(a=-1),{userAgent:navigator.userAgent,screen:{height:r,width:n,colorDepth:o,pixelDepth:a,orientationType:t}}}())}var A=window;function R(e){var t=e.type,r={},n={id:this.getAttribute("perf-id"),name:this.getAttribute("perf-"+t),event:t};if(n.id){this.getAttribute("perf-route")&&(n.route=this.getAttribute("perf-route"));var o=null;if(this.getAttribute("perf-data")){r=this.getAttribute("perf-data");try{r=JSON.parse(r)}catch(e){f("error",(o=e).message),console.warn("[PERF] custom event",o)}}o||(n.data=r,D("event",n))}else f("error",i.id(t))}function O(){["click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","keydown","keypress","keyup","abort","beforeunload","error","hashchange","load","pageshow","pagehide","resize","scroll","unload","blur","change","focus","focusin","focusout","input","invalid","reset","search","select","submit","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","copy","cut","paste","afterprint","beforeprint","abort","canplay","canplaythrough","durationchange","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","animationend","animationiteration","animationstart","transitionend"].forEach(function(t){var e,r;(e="[perf-"+t+"]",void 0===r&&(r=document),[].slice.call(r.querySelectorAll(e))).forEach(function(e){e.addEventListener(t,R,!1)})})}var _="X-ELEME-REQUESTID";function j(e){var t=window;return{navigationStart:t.performance&&t.performance.timing?t.performance.timing.navigationStart:0,startTime:p(e.startTime),duration:p(e.duration),dnsTime:p(e.domainLookupEnd-e.domainLookupStart),tcpTime:p(e.connectEnd-e.connectStart),reqTime:p(e.responseStart-e.requestStart),resTime:p(e.responseEnd-e.responseStart)}}function U(e,t){if(t)return e.get(_);for(var r=0;r<e.length;r++)if(e[r].header.toUpperCase()===_)return e[r].value;return null}function M(e,t){var r=t.url,n=t.method,o=t._requestId;e[r]=e[r]||[],e[r].push([o,n])}function F(n,e){return[d.trackerDomain,d.crayfishDomain].concat(e).some(function(e){var t=c(n),r=c(e);return 0===t.indexOf(r)})}var H=window;function B(){if(H.performance&&"function"==typeof H.performance.getEntries){var e=H.performance.getEntriesByType("resource").filter(function(e){var t=e.initiatorType;return-1===["fetch","xmlhttprequest","beacon"].indexOf(t)}).filter(function(e){var t=e.name,r=e.initiatorType;return!(l(t).host===d.trackerDomain&&"img"===r)}).map(function(e){return s(function(e){var t=e.name||"";256<t.length&&(t=t.slice(0,256));var r=e.initiatorType,n=l(t),o=n.port,a=n.host,i=n.urlPath,s=i.split("/").filter(function(e){return!!e}).pop()||"",c=0<s.indexOf(".")?s.split(".").pop():"";return{network:h(),httpMethod:"GET",solution:"timing",statusCode:200,url:t,reqLength:void 0,respLength:void 0,errorDomain:void 0,errorDescription:void 0,elapsedTime:void 0,error:!1,host:a,port:o,urlPath:i,assetType:c,initiatorType:r}}(e),j(e))});e.length&&D("network-batched",e),H.ElemePerfConfigs.reportAssetsConstantly&&H.performance.clearResourceTimings&&(H.performance.clearResourceTimings(),setTimeout(B,2e3))}}function W(e){if(!F(e.url,H.ElemePerfConfigs.bypassUrls))try{var t=U(e.headers,!1);null===t&&(t=u()+"|"+Date.now(),e.headers.push({header:_,value:t})),e._startedTime=H.performance.now(),e._requestId=t,M(H.ElemePerfConfigs.cachedRequestIds,e)}catch(e){console.warn("[PERF] Failed to add requestId",e)}}function z(e){var t=e.request;if(!F(t.url,H.ElemePerfConfigs.bypassUrls))try{var r=U(t.headers,!0);null===r&&(r=u()+"|"+Date.now(),t.headers.append(_,r)),t._startedTime=H.performance.now(),t._requestId=r,M(H.ElemePerfConfigs.cachedRequestIds,t)}catch(e){console.warn("[PERF] Failed to add requestId",e)}}function J(e){var t={solution:"ajax",network:h()};if(s(t,e),H.performance&&"function"==typeof H.performance.getEntriesByName){var r=H.performance.getEntriesByName(m(e.url)),n=r[r.length-1];n&&(s(t,j(n)),s(t,{solution:"ajax-timing"}))}D("network",t)}function V(e,t){var r=e.url;if(!F(r,H.ElemePerfConfigs.bypassUrls)){var n,o=m(r),a=l(o),i=a.host,s=a.urlPath,c=a.port,u=t.status,d=!1;(0===u||400<=u)&&(d=!0),n=e._startedTime?p(H.performance.now()-e._startedTime):-1,J({statusCode:u,reqLength:r.length,respLength:function(e){if("text"!==e.responseType&&""!==e.responseType)return"blob"===e.responseType?e.response.size:-1;var t=e.responseText;try{return new Blob([t],{type:"plain/text"}).size}catch(e){return"string"==typeof t?t.length:0}}(t),httpMethod:e.method,url:o,host:i,port:c,urlPath:s,error:d,errorDomain:void 0,errorDescription:d?t.responseText:void 0,requestId:e._requestId,elapsedTime:n})}}function G(e){var t=e.request,r=e.response,n=t.url;if(!F(n,H.ElemePerfConfigs.bypassUrls)){var o,a=m(n),i=l(a),s=i.host,c=i.urlPath,u=i.port;if(o=t._startedTime?p(H.performance.now()-t._startedTime):-1,r){var d=r.status,f=!1;(0===d||400<=d)&&(f=!0),r.clone().blob().then(function(e){J({statusCode:d,reqLength:n.length,respLength:e.size,httpMethod:t.method,url:a,host:s,port:u,urlPath:c,error:f,errorDomain:void 0,errorDescription:f?r.statusText:void 0,requestId:t._requestId,elapsedTime:o})})}else{J({statusCode:-1,reqLength:-1,respLength:-1,httpMethod:-1,url:a,host:s,port:u,urlPath:c,error:!0,errorDomain:void 0,errorDescription:"Fetch API failed with no response",requestId:t._requestId,elapsedTime:o})}}}function X(e){var t={link:"href",script:"src",img:"src",audio:"src",video:"src",source:"src"},r=e.target,n=r.tagName.toLowerCase();if(t.hasOwnProperty(n)){var o=r.hasAttribute("integrity"),a=o?"integrity":"error",i=o?["integrity"]:[],s={tag:n,url:r[t[n]]};i.forEach(function(e){s[e]=r[e]}),D("network-"+a,s)}}function $(){var e=H.ElemePerfConfigs.etraceApiFilter;if(H.ElemePerfConfigs.cachedRequestIds=H.ElemePerfConfigs.cachedRequestIds||{},a&&a.when(/^/,e,W,V),"function"==typeof H.fetch){"function Headers() { [native code] }"===H.Headers.toString()&&o&&o.when(/^/,e,z,G)}}var K=window,Q={};function Y(e,t){if(!F(e,K.ElemePerfConfigs.bypassUrls)){if(!((r=e).match(/^http:/)||r.match(/^\//)&&"http:"===location.protocol))return!1;var r;if(Q[e])return!1;D("http-warning",{method:t,url:e}),Q[e]=!0}}function Z(e){Y(e.url,"xhr")}function ee(e){Y(e.request.url,"fetch")}function te(){K.performance&&"function"==typeof K.performance.getEntries&&K.performance.getEntries().forEach(function(e){Y(e.name,"asset")})}function re(){var e=new Date(Date.now()+288e5).toISOString().slice(0,10);return function(){for(var e="",t=0;t<4;t++)e+=("0000000"+Math.floor(2821109907456*Math.random()).toString(36)).slice(-8);return e}()+"_"+e}var ne,oe,ae,ie=window;if(ie.ElemePerfConfigs||(ie.ElemePerfConfigs={}),"function"==typeof document.addEventListener&&(function(){if("performance"in window==0&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==0){var e=Date.now();performance.timing&&performance.timing.navigationStart&&(e=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-e}}}(),ie.perf=ie.Perf={name:"perf-js",version:"2.2.0",ensureHealth:function(){var e=document.getElementsByTagName("head")[0];if(e){var t=document.createElement("meta");t.setAttribute("itemprop","perf-health"),t.setAttribute("content",window.ElemePerfConfigs.ssid),e.appendChild(t)}},send:D,sendEvent:function(e){switch(null==e.id&&f("error","Custom event: `id` is required"),null==e.name&&f("error","Custom event: `name` is required"),n(e.data)){case"Undefined":break;case"Object":case"Array":for(var t in e.data){var r=e.data[t];"String"!==n(r)&&f("warn","Custom event: "+r+" is not a string at "+t)}break;default:f("warn","Custom event: `data` should be array or object")}D("event",e)},sendRawEvent:function(e,t){var r=y.ElemePerfConfigs,n=r.appName,o=r.pageName,a=r.from,i=r.serviceWorker,s=r.ssid;return P({id:y.location.href,sdkVer:"2.2.0",appName:n,pageName:o,from:a,source:i?"web-sw":"web",ssid:s,network:h(),type:e,d:t}),this},count:function(e){L(s(e,{type:q}))},timing:function(e){L(s(e,{type:I}))}},function(){for(var e in t)e in ie.ElemePerfConfigs||(ie.ElemePerfConfigs[e]=t[e])}(),!ie.ElemePerfConfigs.dev)){ie.ElemePerfConfigs.ssid=function(){var e,t=location&&location.hostname;if(t)e=document.cookie.match(/(?:^|; )perf_ssid=(.*?)(?:; |$)|$/)[1];else try{e=localStorage.getItem("perf_ssid")}catch(e){setTimeout(function(){throw e})}if(!e)if(e=re(),t)document.cookie="perf_ssid="+e+"; Expires=Wed, 31 Dec 2098 16:00:00 GMT; Domain="+t+"; Path=/";else try{localStorage.setItem("perf_ssid",e)}catch(e){setTimeout(function(){throw e})}return e}(),ie.ElemePerfConfigs.reportAssetsNetwork&&document.addEventListener("error",X,!0),ie.ElemePerfConfigs.apiImmediately&&$();var se=ie.ElemePerfConfigs.appName,ce="https://"+d.crayfishDomain+"/perf.js@json/sdk-config/"+encodeURI(se);r("count",{id:"hostAppName",value:se}),ne=ce,oe=function(e,t){e&&f("warn","Fail loading config from Crayfish");var r,n=s(d.sendingTypes,e?{}:t);n.global&&(n.device&&("complete"===document.readyState?x():N.addEventListener("load",x)),n.load&&function(){var a=window,e=!1;function t(){var o={};return[["lookup",["domainLookupEnd","domainLookupStart"]],["connect",["connectEnd","connectStart"]],["waiting",["responseStart","requestStart"]],["receiving",["responseEnd","responseStart"]],["parsing",["domComplete","domLoading"]],["contentLoaded",["domContentLoadedEventStart","navigationStart"]],["pageLoaded",["loadEventStart","navigationStart"]]].forEach(function(e){var t=e[1],r=t[0],n=t[1];o[e[0]]=a.performance&&a.performance.timing?a.performance.timing[r]-a.performance.timing[n]:0}),o}function r(){e||(e=!0,D("load",t()))}a.performance&&("complete"===document.readyState?r():a.addEventListener("load",r),a.addEventListener("beforeunload",function(){D("unload",s({openTime:a.performance.now()},t()))}))}(),n.event&&("complete"===document.readyState?O():A.addEventListener("load",O)),n.asset&&("complete"===document.readyState?B():H.addEventListener("load",B)),n.http&&("complete"===document.readyState?te():K.addEventListener("load",te)),n.http&&(a&&a.when(/^/,/^/,Z),"function"==typeof K.fetch&&K.Headers&&"function Headers() { [native code] }"===K.Headers.toString()&&o&&o.when(/^/,/^/,ee)),n.api&&!ie.ElemePerfConfigs.apiImmediately&&$(),E=!0,(r=n)&&(y.ElemePerfConfigs.sendingTypes=r),k.forEach(function(e){S.apply(null,e)}),k=[])},(ae=new XMLHttpRequest).open("GET",ne),"function"==typeof oe&&(ae.onreadystatechange=function(){4===ae.readyState&&(200===ae.status?oe(null,JSON.parse(ae.responseText||null)):oe({req:ae,msg:"failed"},null))}),ae.send()}}(null,null);
