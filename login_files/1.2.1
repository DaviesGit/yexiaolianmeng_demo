!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}({2:function(e,t,n){"use strict";n.r(t);var o=["isAlipay","isEleme","isTaobao","isAlipayMini"].some(function(e){return window.ebridge[e]}),a=-1,i=[];window.pageLocation={longitude:0,latitude:0},/zebra\.alibaba-inc\.com\/preview\/iframe/.test(location.href)&&window.parent!==window&&(window.longitude=121.382379,window.latitude=31.232878);var r,u=function(e){return new Promise(function(t){-1===a||e&&0!==a?(a=0,ebridge.getLocation({useTaoCache:!0,checkQuery:!0,timeout:o?3:10}).then(function(e){for(window.pageLocation=e,a=1,t(window.pageLocation);i.length>0;)i.pop()(window.pageLocation)}).catch(function(){for(a=1,t(window.pageLocation);i.length>0;)i.pop()(window.pageLocation)})):0===a?i.push(t):t(window.pageLocation)})},c=function(){return new Promise(function(e){var t=(window.location.href.match(/[?#&]geohash=(\w+)/)||[])[1];if(t&&window.Geohash)try{var n=window.Geohash.decode(t);window.pageLocation={latitude:n[0],longitude:n[1]},e(window.pageLocation)}catch(t){e(window.pageLocation)}else e(window.pageLocation)})},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce(function(t,n){var o=e[n];return t.push("".concat(n,"=").concat(o)),t},[]).join("&")},l=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=window.location.href;e=e.replace(/[\\[\\]]/g,"\\$&");var o=new RegExp("[?&]".concat(e,"(=([^&#]*)|&|#|$)")).exec(n);if(o){if(!o[2])return"";var a=o[2].replace(/\+/g," ");return t?decodeURIComponent(a):a}},s=function(){try{var e=document.querySelector('meta[name="spm-id"]')||document.querySelector('meta[name="data-spm"]');if(!e||1!==e.nodeType)return"0.0";var t=e.getAttribute("content").split(".");if(t.length<2){var n=document.body.getAttribute("data-spm")||"0";t.push(n)}return t.join(".")}catch(e){return"0.0"}},g=function(e){var t=new RegExp("(?:^|; )".concat(e,"=(.*?)(?:; |$)|$"));return document.cookie.match(t)[1]},f=function(e){(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.sendPV",arguments:[{is_auto:!1},e]})},p=/(?:[\w-]+\.)?[\w-]+$|$/i.exec(document.domain||"")[0],m=function(){for(var e="",t=0;t<4;t++)e+="0000000".concat(Math.floor(2821109907456*Math.random()).toString(36)).slice(-8);return e},w=function(){var e=(new Date).getTime();return"".concat(m(),"_").concat(e)},h=function(){var e=new Date((new Date).getTime()+288e5);return"".concat(m(),"_").concat([e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate()].join("-").replace(/\b\d\b/g,"0$&"))},v=(r=document.querySelector('meta[name="aplus-waiting"]'))&&"MAN"===r.getAttribute("content"),b=(function(){var e=document.querySelector('meta[name="autogoldlog-exposure-rate"]');e&&e.getAttribute("content")&&parseFloat(e.getAttribute("content"))}(),function(){var e=document.querySelector('meta[name="autogoldlog-exposure-time"]');e&&e.getAttribute("content")&&parseFloat(e.getAttribute("content"))}(),function(){var e=document.querySelector('meta[name="autogoldlog-clk-debounce"]');e&&e.getAttribute("content")&&parseFloat(e.getAttribute("content"))}(),function(){var e=document.querySelector('meta[name="sendlog-params-prefix"]');return e&&e.getAttribute("content")?e.getAttribute("content"):""}()),_=function(){var e=document.querySelector('meta[name="addaplus-extra-params"]');return e&&e.getAttribute("content")?JSON.parse(e.getAttribute("content")):[]}();function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var E,A=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params={},this.init()}var t,n,o;return t=e,(n=[{key:"init",value:function(){var e,t,n=g("ut_ubt_ssid")||h();e="ut_ubt_ssid",t=n,document.cookie="".concat(e,"=").concat(t,"; Expires=Wed, 31 Dec 2098 16:00:00 GMT; Domain=").concat(p,"; Path=/");var o=this._getUrlParams(),a=this._getKbParams(),i=this._getMetaExtraParams(),r=location.href.match(/[?#&]from=([^?#&]*)/),u=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){y(e,t,n[t])})}return e}({},a,o,i,{_ish5:1,"spm-pre":l("spm-pre"),"spm-url":l("spm"),ubtssid:n||h(),o2o_page_id:w(),entrance_id:l("entrance_id"),entrance_title:l("entrance_title",!1),from:r?r[1]:void 0,aplusVersion:"0.0.5"});this.add(u)}},{key:"getValue",value:function(){return this.params}},{key:"setValue",value:function(e){return this.params=e,this.setMetaInfo(),this.params}},{key:"add",value:function(e){var t=this;return Object.keys(e).forEach(function(n){void 0!==e[n]&&(t.params[n]=e[n])}),this.setMetaInfo(),this.params}},{key:"setMetaInfo",value:function(){var e=d(this.params);(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.setMetaInfo",arguments:["aplus-exinfo",e]})}},{key:"_getUrlParams",value:function(){var e={};if(b){var t=new RegExp("".concat(b,"[^&|#|?]+"),"g"),n=window.location.href.match(t);n&&n.forEach(function(t){var n=new RegExp("".concat(b,"([^=]+)=(\\S*)")),o=t.match(n);o&&o[1]&&(e[o[1]]=o[2]||void 0)})}return e}},{key:"_getKbParams",value:function(){var e={},t=window.location.href.match(/kb_[^&|#|?]+/g);return t&&t.forEach(function(t){var n=t.match(/(kb_[^=]+)=(\S*)/);n&&n[1]&&(e[n[1]]=n[2]||void 0)}),/h5.ele.me\/search/.test(location.href)&&localStorage.setItem("ADDAPLUS_ELEME_KB_PARAMS",JSON.stringify(e)),t?e:JSON.parse(localStorage.getItem("ADDAPLUS_ELEME_KB_PARAMS"))}},{key:"_getMetaExtraParams",value:function(){var e={};return _.forEach(function(t){var n=t.split("=");e[n[0]]=n[1]}),e}}])&&P(t.prototype,n),o&&P(t,o),e}();try{E=new A}catch(e){console.error(e),E={params:{},getValue:function(){},setValue:function(){},add:function(){},setMetaInfo:function(){}}}var S=E,T=function(e){return new Promise(function(t){var n=ebridge.isTaobao||ebridge.isTBMiniApp;(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,o){t.type=(t.type||"GET").toUpperCase();var a=d(t.data);"GET"===t.type&&a&&(e="".concat(e).concat(-1===e.indexOf("?")?"?":"&").concat(a));var i=new XMLHttpRequest;i.open(t.type,e,!0),i.async=!0,"POST"===t.type&&i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),Object.keys(t.headers||{}).forEach(function(e){i.setRequestHeader(e,t.headers[e])}),i.withCredentials=!0;var r=setTimeout(function(){i.onreadystatechange=function(){},i.abort(),o()},3e3);i.send(a),i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status){clearTimeout(r);var e=JSON.parse(i.responseText);n(e)}else o()}})})(n?"https://h5.ele.me/restapi/eus/login/login_by_opensid":"https://h5.ele.me/restapi/eus/v2/current_user?info_raw={}",{type:n?"POST":"GET",headers:{"x-shard":"loc=".concat(e.longitude,",").concat(e.latitude)}}).then(function(e){var n="number"==typeof e?e:e.user_id;t(n||"0")}).catch(function(){t("0")})})};(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.setMetaInfo",arguments:["aplus-waiting","MAN"]});var M,I,L=function(){return new Promise(function(e){var t=localStorage.getItem("ELEME_ALIPAY_DDID");return t?e({alipay_ddid:t}):window.ap&&window.ap.call?void window.ap.call("getConfig",{configKeys:["did"]},function(t){var n=t.data,o=void 0===n?{}:n,a=t.did||o.did||"";if(a)return localStorage.setItem("ELEME_ALIPAY_DDID",a),e({alipay_ddid:a});e({alipay_ddid:""})}):e({alipay_ddid:""})})},x=function(){return new Promise(function(e){var t=localStorage.getItem("ELEME_TB_UTDID");return t?e({eleme_device_id:t}):window.WindVane?void window.WindVane.call("TBDeviceInfo","getUtdid",{},function(t){if(t&&t.utdid)return localStorage.setItem("ELEME_TB_UTDID",t.utdid),e({eleme_device_id:t.utdid});e({eleme_device_id:""})},function(){e({eleme_device_id:""})}):e({eleme_device_id:""})})},O=function(){return Promise.resolve({})},D=(M=ebridge?ebridge.isAlipayMini||ebridge.isAlipay?L:ebridge.isTaobao||ebridge.isTBMini?x:O:O,I=1e3,function(){var e=function(e){return new Promise(function(t){setTimeout(t,e)})}(I).then(function(){return!1});return Promise.race([M(),e])});window.ebridge.isEleme&&window.hybridAPI&&!window.hybridAPI.compareVersion("8.12.0")&&(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.setMetaInfo",arguments:["aplus-toUT","UT4Aplus"]});var q=o?u():c(),j=D().then(function(e){e&&S.add(e)}).then(function(){return q}).then(function(e){return new Promise(function(t){!function(e){Promise.all([T(e)]).then(function(e){S.getValue().user_id!==e[0].toString()&&S.add({user_id:e[0].toString()}),(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.record",arguments:["/ele.base.redress","EXP","","GET"]})})}(e);var n=l("uid");if(n)t({userId:n,pageLocation:e});else{var o=g("UTUSER");t(o?{userId:o,pageLocation:e}:{userId:"0",pageLocation:e})}})}).then(function(e){S.add({user_id:e.userId,latitude:e.pageLocation.latitude,longitude:e.pageLocation.longitude});var t=document.createElement("script");t.src="//g.alicdn.com/alilog/mlog/aplus_wap.js",t.type="text/javascript",t.id="beacon-aplus",t.setAttribute("exparams","uidaplus=".concat(e.userId,"&aplus&sidx=aplusSidex")),document.body.appendChild(t),t.onload=function(){if(v||f(S.getValue()),(window.ebridge.isAliMiniApp||window.ebridge.isAlipay)&&document.addEventListener("resume",function(){f(S.getValue())},!1),ebridge&&ebridge.isEleme&&hybridAPI&&hybridAPI.compareVersion("8.12.0")){var e=s(),t={"spm-cnt":"".concat(e,".0.0")},n=l("spm");n&&(t["spm-url"]=n),hybridAPI.updatePageProperties(t)}}});window.__AddAplus__={promise:j,getDefaultExParams:S.getValue.bind(S),setDefaultExParams:S.setValue.bind(S),addDefaultExParams:S.add.bind(S),currentPageSpm:s(),createO2OPageId:w,sendPv:f,sendGoldlog:function(e,t,n){(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.record",arguments:[e,t,n,"GET"]})}},window.getPageLocation=u,window.getGeoHashLocation=c}});